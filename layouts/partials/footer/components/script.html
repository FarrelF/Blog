{{- $VibrantURL := "" -}}
{{- if eq .Site.Params.CDN.Libraries.Provider "unpkg" -}}
    {{- $VibrantURL = "https://unpkg.com/node-vibrant@3.1.5/dist" -}}
{{- else -}}
    {{- $VibrantURL = "https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist" -}}
{{- end -}}
<script src="{{ $VibrantURL }}/vibrant.min.js"
    integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin="anonymous"></script>

{{- $Permalink := "" -}}
{{- $script := "" -}}
{{- if ne hugo.IsProduction false -}}
    {{- $script = resources.Get "ts/main.ts" | js.Build | fingerprint | minify -}}
    {{- $Permalink = $script.RelPermalink -}}
    {{- if .Site.Params.CDN.JS.URL -}}
        {{- $Permalink = printf "%s%s" $.Site.Params.CDN.JS.URL $script.RelPermalink -}}
    {{- end -}}
{{- else -}}
    {{- $script = resources.Get "ts/main.ts" | js.Build -}}
    {{- $Permalink = $script.RelPermalink -}}
{{- end -}}

<script type="text/javascript" src="{{ $Permalink }}" defer></script>